name: Flutter Web App Build Action

on:
  workflow_call:
    inputs:
      app_dir:
        description: 'The location of the flutter app that will be built'
        default: './'
        required: true
        type: string

jobs:
  build:
    defaults:
      run:
        working-directory: ${{ inputs.app_dir }}
    steps:
    - uses: subosito/flutter-action@v2
      with:
        channel: 'stable'
    - name: Install App Dependencies
      run: flutter pub get
    - name: Run Tests
      run: flutter test
    - name: Build Flutter Web
      run: flutter build web
